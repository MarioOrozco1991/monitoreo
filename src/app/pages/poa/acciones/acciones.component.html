<div class="container">
  <h1>Listado de acciones</h1>
</div>
<div class="container mt-5">
  <button *ngIf="opcionDisponible('Crear nueva accion')" [routerLink]="['crear']" type="button" class="btn btn-primary mr-3"><nb-icon icon="file-outline"></nb-icon> Crear nueva acción </button>
</div>
<div class="container mt-5">
  <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-bordered row-border hover responsive">
    <thead class="table table-dark">
      <tr class="text-center">
        <th><font color="white">No.</font></th>
        <th><font color="white">Nombre de la acción</font></th>
        <th><font color="white">Estado</font></th>
        <th><font color="white">Opciones</font></th>
      </tr>   
    </thead>
    <tbody> 
      <tr *ngFor="let datos of respuesta; let i=index" [ngSwitch]="datos.estado">
        <td class="text-center" style="width: 40px;">{{datos.id}}</td>
        <td>{{datos.nombreAccion}}</td>
        <td class="text-center">
          <span *ngSwitchCase="'Registrado'" class="badge badge-secondary">{{datos.estado}}</span>
          <span *ngSwitchCase="'En revision'" class="badge badge-warning">{{datos.estado}}</span>
          <span *ngSwitchCase="'Validado'" class="badge badge-info">{{datos.estado}}</span>
          <span *ngSwitchCase="'Aprobado'" class="badge badge-success">{{datos.estado}}</span>
          <span *ngSwitchCase="'Rechazado'" class="badge badge-danger">{{datos.estado}}</span>
        </td>
        <td class="text-center" style="width: 250px;">
          <button *ngIf="opcionDisponible('Enviar a revision')" (click)="enviarRevisionAccion(datos, i)" nbTooltip="Enviar a revisión" nbTooltipPlacement="bottom" type="button" class="btn btn-sm btn-warning mr-2"> <nb-icon icon="arrow-forward-outline"></nb-icon> </button>
          <button *ngIf="opcionDisponible('Editar accion')" [routerLink]="[datos.id]" nbTooltip="Editar" nbTooltipPlacement="bottom" type="button" class="btn btn-sm btn-success mr-2"> <nb-icon icon="edit-2-outline"></nb-icon> </button>
          <button *ngIf="opcionDisponible('Eliminar accion')" (click)="eliminarAccion(datos, i)" nbTooltip="Eliminar" nbTooltipPlacement="bottom" type="button" class="btn btn-sm btn-danger"> <nb-icon icon="trash-2-outline"></nb-icon></button>
          <button *ngIf="opcionDisponible('Revisar accion')" [routerLink]="[datos.id]" nbTooltip="Revisar" nbTooltipPlacement="bottom" type="button" class="btn btn-sm btn-success mr-2"> <nb-icon icon="file-text-outline"></nb-icon> </button>
          <button *ngIf="opcionDisponible('Aprobar accion')" [routerLink]="[datos.id]" nbTooltip="Aprobar" nbTooltipPlacement="bottom" type="button" class="btn btn-sm btn-success mr-2"> <nb-icon icon="checkmark-circle-2-outline"></nb-icon> </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

